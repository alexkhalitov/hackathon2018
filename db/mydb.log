/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
create table bank_filial (id bigint generated by default as identity (start with 1), address varchar(255) not null, city_id bigint, geoPosition_id bigint, primary key (id))
create table cash_points (id bigint generated by default as identity (start with 1), address varchar(255) not null, bankFilial_id bigint, city_id bigint, geoPosition_id bigint, primary key (id))
create table cities (id bigint generated by default as identity (start with 1), name varchar(255) not null, country_id bigint, primary key (id))
create table cities_bank_filial (City_id bigint not null, filials_id bigint not null)
create table clients (id bigint generated by default as identity (start with 1), name varchar(255), phone varchar(255), primary key (id))
create table clients_issues (Client_id bigint not null, issues_id bigint not null)
create table countries (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
create table geo_positions (id bigint generated by default as identity (start with 1), latitude double not null, longitude double not null, primary key (id))
create table issue_categories (id bigint generated by default as identity (start with 1), answer varchar(2048), description varchar(2048), name varchar(255), severity varchar(255), primary key (id))
create table issue_categories_issue_categories (IssueCategory_id bigint not null, children_id bigint not null)
create table issues (id bigint generated by default as identity (start with 1), description varchar(255), status varchar(255), assignee_id bigint, client_id bigint, geoPosition_id bigint, issueCategory_id bigint, primary key (id))
create table specialists (id bigint generated by default as identity (start with 1), chatid bigint, firstname varchar(255) not null, lastname varchar(255) not null, middlename varchar(255), mobile varchar(255) not null, primary key (id))
create table specialists_bank_filial (Specialist_id bigint not null, bankFilials_id bigint not null)
create table specialists_issue_categories (Specialist_id bigint not null, categories_id bigint not null)
alter table cities_bank_filial add constraint UK_j1khobquotfsjpjdn3j56dkbu unique (filials_id)
alter table clients_issues add constraint UK_o1ogaqrnea99p1ivnifj8jvtx unique (issues_id)
alter table issue_categories_issue_categories add constraint UK_btmm193wkc74itcn61jbuym4i unique (children_id)
alter table bank_filial add constraint FK9loie2lruk88sbtr85pjvx83l foreign key (city_id) references cities
alter table bank_filial add constraint FK2yii3ryllc8cveefx2bi54rti foreign key (geoPosition_id) references geo_positions
alter table cash_points add constraint FKalg5bdh6necb0minlluu18yfw foreign key (bankFilial_id) references bank_filial
alter table cash_points add constraint FK7mkynfg9s93ayjc6vt7dec3sj foreign key (city_id) references cities
alter table cash_points add constraint FKirwmq447uefd47iancm42as02 foreign key (geoPosition_id) references geo_positions
alter table cities add constraint FK6gatmv9dwedve82icy8wrkdmk foreign key (country_id) references countries
alter table cities_bank_filial add constraint FKmlryfq30nwrsriauvlr8o3299 foreign key (filials_id) references bank_filial
alter table cities_bank_filial add constraint FKtmjix7sm9d6ij15h7v2p2wn00 foreign key (City_id) references cities
alter table clients_issues add constraint FK605ll1nsljt68rtmu0wii1vph foreign key (issues_id) references issues
alter table clients_issues add constraint FKt41wnwbv82f9kwr5ri04he5g9 foreign key (Client_id) references clients
alter table issue_categories_issue_categories add constraint FKi09c3j3rx5pww3pgojnn2dw4f foreign key (children_id) references issue_categories
alter table issue_categories_issue_categories add constraint FK5knuq49pay07jfl9yj5vl5igg foreign key (IssueCategory_id) references issue_categories
alter table issues add constraint FK9d9w1im6yk20kl7l997fwd2hx foreign key (assignee_id) references specialists
alter table issues add constraint FKnvq59pw65maspv22tvjhy5b4h foreign key (client_id) references clients
alter table issues add constraint FKdfsinwjkhnxw5485f7ngoncuy foreign key (geoPosition_id) references geo_positions
alter table issues add constraint FKqnp0abc1fwt06bflkf2y9p6li foreign key (issueCategory_id) references issue_categories
alter table specialists_bank_filial add constraint FKhlh06pwyo0d251m02smuqmena foreign key (bankFilials_id) references bank_filial
alter table specialists_bank_filial add constraint FKsf0au5xnb5b8un39y8lc9q3nq foreign key (Specialist_id) references specialists
alter table specialists_issue_categories add constraint FK8suxaahl4yw6i5muwhx0f5nuh foreign key (categories_id) references issue_categories
alter table specialists_issue_categories add constraint FK7yips0pu5o8f2cnd01w726atc foreign key (Specialist_id) references specialists
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
alter table cities_bank_filial drop constraint UK_j1khobquotfsjpjdn3j56dkbu
alter table cities_bank_filial add constraint UK_j1khobquotfsjpjdn3j56dkbu unique (filials_id)
alter table clients_issues drop constraint UK_o1ogaqrnea99p1ivnifj8jvtx
alter table clients_issues add constraint UK_o1ogaqrnea99p1ivnifj8jvtx unique (issues_id)
alter table issue_categories_issue_categories drop constraint UK_btmm193wkc74itcn61jbuym4i
alter table issue_categories_issue_categories add constraint UK_btmm193wkc74itcn61jbuym4i unique (children_id)
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
alter table cities_bank_filial drop constraint UK_j1khobquotfsjpjdn3j56dkbu
alter table cities_bank_filial add constraint UK_j1khobquotfsjpjdn3j56dkbu unique (filials_id)
alter table clients_issues drop constraint UK_o1ogaqrnea99p1ivnifj8jvtx
alter table clients_issues add constraint UK_o1ogaqrnea99p1ivnifj8jvtx unique (issues_id)
alter table issue_categories_issue_categories drop constraint UK_btmm193wkc74itcn61jbuym4i
alter table issue_categories_issue_categories add constraint UK_btmm193wkc74itcn61jbuym4i unique (children_id)
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
alter table cities_bank_filial drop constraint UK_j1khobquotfsjpjdn3j56dkbu
alter table cities_bank_filial add constraint UK_j1khobquotfsjpjdn3j56dkbu unique (filials_id)
alter table clients_issues drop constraint UK_o1ogaqrnea99p1ivnifj8jvtx
alter table clients_issues add constraint UK_o1ogaqrnea99p1ivnifj8jvtx unique (issues_id)
alter table issue_categories_issue_categories drop constraint UK_btmm193wkc74itcn61jbuym4i
alter table issue_categories_issue_categories add constraint UK_btmm193wkc74itcn61jbuym4i unique (children_id)
DISCONNECT
